# Практическая работа


## Структура репозитория

* `JavaScript/`: Папка с 5 задачами на JavaScript.

    * `randomColor.html`: Интерфейс для изменения цвета и размеров квадрата.

    * `orderRegistration.html`: Форма оформления заказа с валидацией и картой.

    * `tableOfProducts.html`: Таблица товаров с фильтрацией по цене.

    * `cpuUsage.html`: График загруженности процессора с симуляцией данных.

    * `spreadsheet.html`: Электронная таблица с редактированием и LocalStorage.

* `PHP/`: Папка с 4 задачами на PHP.

    * `visitCounter.php`: Счётчик посещений страницы.

    * `guestBook.php`: Гостевая книга с SQLite.

    * `calculateDelivery/`: Калькулятор доставки с кэшированием городов.

        * `calculate_delivery.php`: Обработка запросов к сервису доставки.

        * `get_cities.php`: Получение списка городов.

        * `index.html`: Интерфейс формы.

    * `restAPI/`: REST API для управления продуктами.

        * `.gitignore`, `.htaccess`, `composer.json`, `composer.lock`, `database.db`, `index.php`

## Требования

Для JavaScript-задач:

* Современный веб-браузер.

Для PHP-задач:

* PHP

* SQLite3

* Composer

* Веб-сервер (например, встроенный сервер PHP или XAMPP)

* Права на запись в директорию `PHP/` для автоматического создания файлов `counter.txt`, `database.db` и `cities_cache.json` в заданиях "Счётчик хитов", "Гостевая книга" и "Калькулятор доставки" соответсвенно.

## Установка

1. Клонируйте репозиторий:

```bash 
git clone https://github.com/Palladin4ik/Practice_tsu.git
cd Practice_tsu
```

2. Для JavaScript-задач:
    * Откройте файлы (`randomColor.html`, `orderRegistration.html`, и т.д.) в браузере.
3. Для PHP-задач:
    * Установите зависимости:
        ```bash
        cd PHP/restAPI
        composer install
        ```
    * Запустите сервер:
        ```bash
        cd PHP
        php -S localhost:8000
        ```


## Описание заданий

### JavaScript: Задание 1: Случайный цвет

* **Описание:** Интерактивный интерфейс, где пользователь вводит ширину и высоту квадрата, а при нажатии кнопки «Случайный цвет» квадрат окрашивается в случайный цвет.

* **Запуск:** Откройте `JavaScript/randomColor.html` в браузере.

* **Функциональность:**

    * Поля ввода для ширины и высоты изменяют размер квадрата.

    * Кнопка генерирует случайный цвет.

* **Файлы:** `JavaScript/randomColor.html`

### JavaScript: Задание 2: Оформление заказа

* **Описание:** Форма для оформления заказа с валидацией полей (ФИО, телефон, email), картой Яндекс и ограничением комментария до 500 символов.

* **Запуск:** Откройте `JavaScript/orderRegistration.html` в браузере.

* **Функциональность:**

    * Обязательные поля: ФИО, телефон (только цифры), email (должен содержать @).

    * Карта Яндекс: при клике ставится пин с адресом, при клике на адрес пина открывается baloon с координатами точки.

    * Валидация при нажатии «Отправить»: выводит «Заказ оформлен!» или ошибки красным цветом.

* **Файлы:** `JavaScript/orderRegistration.html`

### JavaScript: Задание 3: Таблица товаров

* **Описание:** Динамическая таблица товаров на основе JSON-данных, с фильтрацией по цене и автоматическим расчётом суммы. Из-за ограничений политики CORS данные берутся не через fetch запрос по предоставленной в задании ссылке, а через функцию `simulateFetchData()`, которая возвращает моковые данные (mockData).

* **Запуск:** Откройте `JavaScript/tableOfProducts.html` в браузере.

* **Функциональность:**

    * Таблица строится динамически.

    * Фильтры «Цена от» и «Цена до»: показывают только подходящие строки.

    * Если фильтры пусты, отображается вся таблица.

    * При отсутствии данных выводится: «Нет данных, попадающих под условие фильтра».

* **Файлы:** `JavaScript/tableOfProducts.html`

### JavaScript: Задание 4: График загруженности процессора

* **Описание:** График загруженности процессора, обновляющийся каждые 5 секунд, с использованием библиотеки Chart.js. Из-за ограничений политики CORS данные берутся не через fetch запрос по предоставленной в задании ссылке, а через функцию `simulateCpuLoad()`, которая возвращает случайное число от 0 до 100 с 5% вероятностью возникновения ошибки.

* **Запуск:** Откройте `JavaScript/cpuUsage.html` в браузере.

* **Функциональность:**

    * Динамический график с обновлением каждые 5 секунд.

    * Под графиком статистика запросов и процент ошибок.

* **Файлы:** `JavaScript/cpuUsage.html`

### JavaScript: Задание 5: Электронная таблица

* **Описание:** Упрощённая электронная таблица с редактированием ячеек, сохранением данных в LocalStorage и добавлением/удалением строк/столбцов.

* **Запуск:** Откройте `JavaScript/spreadsheet.html` в браузере.

* **Функциональность:**

    * Редактирование ячеек по двойному клику.

    * Данные сохраняются в LocalStorage и отображаются визуально.

    * Кнопки + и – добавляют/удаляют строки или столбцы.

    * Подтверждение удаления, если в строках/столбцах есть данные.

* **Файлы:** `JavaScript/spreadsheet.html`

### PHP: Задание 6: Счётчик хитов

* **Описание:** Счётчик числа посещений страницы, увеличивающийся при каждом обновлении. Число хранится в текстовом файле `counter.txt`, который создаётся автоматически.

* **Запуск:**

    * Убедитесь, что директория `PHP/` имеет права на запись.

    * Откройте http://localhost:8000/visitCounter.php:
        ```bash
        cd PHP
        php -S localhost:8000
        ```

* **Функциональность:**

    * Отображает: «Страница была загружена N раз. Текущее время XX:XX».

    * N — количество посещений, XX:XX — серверное время.

* **Файлы:** `PHP/visitCounter.php`

* **Примечание:** Требуются права на запись для создания `counter.txt`.

### PHP: Задание 7: Гостевая книга

* **Описание:** Гостевая книга с сохранением сообщений в SQLite (`database.db` создаётся автоматически). Поддерживает анонимные сообщения и проверку на непустое сообщение.

* **Запуск:**

    * Убедитесь, что директория `PHP/` имеет права на запись.

    * Откройте http://localhost:8000/guestBook.php:
        ```bash
        cd PHP
        php -S localhost:8000
        ```

* **Функциональность:**

    * Автоматически добавляется дата сообщения.

    * Если имя не указано, сохраняется как анонимное.

    * Сообщения сохраняются только если они не пустые.

* **Файлы:** `PHP/guestBook.php`

* **Примечание:** Требуются права на запись для создания `database.db`.

### PHP: Задание 8: Калькулятор доставки

* **Описание:** Интеграция с внешним сервисом для расчёта стоимости доставки с кэшированием списка городов.

* **Запуск:**
    * Убедитесь, что директория `PHP/calculateDelivery/` имеет права на запись.

    * Откройте http://localhost:8000/calculateDelivery/index.html:
        ```bash
        cd PHP
        php -S localhost:8000
        ```

    * Выберите город, введите вес, нажмите «Рассчитать».

* **Функциональность:**

    * Список городов кэшируется в файл после запроса к `exercise.develop.maximaster.ru/service/city/`.

    * Если кэш актуален (сегодняшний), используется он, иначе отправляется новый запрос.

    * Форма отправляет POST-запрос к `calculate_delivery.php`.

    * Результат отображается под кнопкой «Рассчитать», ошибки выделяются красным цветом.

* **Файлы:** `PHP/calculateDelivery/calculate_delivery.php`, `PHP/calculateDelivery/get_cities.php`, `PHP/calculateDelivery/index.html`

### PHP: Задание 9: REST API

* **Описание:** REST API для управления продуктами с использованием Slim Framework и SQLite. Поддерживает CRUD-операции с возвратом JSON и HTTP-статусов.

* **Запуск:**

    * Установите зависимости:
        ```bash
        cd PHP/restAPI
        composer install
        ```

    * Запустите сервер:
        ```bash
        cd PHP/restAPI
        php -S localhost:8000
        ```

    * Примеры запросов:

        * Получить все продукты:
            ```bash
            curl http://localhost:8000/api/products/
            ```
            **Ответ:**
            ```bash
            [
                {"id": 1, "name": "Laptop", "price": 999.99, "description": "High-performance laptop"}
            ]
            ```

        * Создать продукт:
            ```bash
            curl -X POST http://localhost:8000/api/products/ -H "Content-Type: application/json" -d '{"name":"Tablet","price":299.99,"description":"Portable tablet"}'
            ```
            **Ответ:**
            ```bash
            {"id": 3, "message": "Product created"}
            ```

        * Обновить продукт:
            ```bash
            curl -X PUT http://localhost:8000/api/products/1/ -H "Content-Type: application/json" -d '{"name":"Updated Laptop","price":1099.99,"description":"Upgraded model"}'
            ```
            **Ответ:**
            ```bash
            {"message": "Product 1 updated"}
            ```

        * Удалить продукт:
            ```bash
            curl -X DELETE http://localhost:8000/api/products/1/
            ```
            **Ответ:**
            ```bash
            {"message": "Product 1 deleted"}
            ```

* **Файлы:** `PHP/restAPI/index.php`, `PHP/restAPI/composer.json`, `PHP/restAPI/.htaccess`, `PHP/restAPI/database.db`
